{"ast":null,"code":"import initialAlg from\"./algorithms/initialAlg\";function Node(row,col){return document.getElementById(\"node-\".concat(row,\"-\").concat(col));}// Gets a node from the screen\n//this function is bound to App\n//so that it can call the functions in App\nexport default function stepForward(){var moves,solvable;//check if moves has already been calculated\nif(this.state.moves.length<1){var temp=initialAlg(this.state.grid);this.setState({moves:temp.moves});moves=temp.moves;solvable=temp.solvable;}else{moves=this.state.moves;if(this.state.grid.length<3||this.state.grid[0]<3){solvable=false;}else{solvable=true;}}//copy funtions from app so they can be called within helper\nvar setCurrIndex=this.setCurrIndex;//Check if matrix is too small\nif(!solvable){console.log(\"matrix too small\");document.getElementById(\"Error\").innerHTML=\"Matrix has no inner tiles. Total Water = 0.\";return;}var currIndex=this.state.currIndex;//how far we are along moves\n//   console.log(\"In visualizeInitialAlg\", currIndex)\n//reset className of <div id=\"end\"><div> if it's still highlighted fromprevious run\ndocument.getElementById(\"end\").className=\"\";if(currIndex<1){//make initial border\nvar tempMoves=moves[0].currMoves;for(var i=0;i<tempMoves.length;i++){Node(tempMoves[i][0],tempMoves[i][1]).className=\"node-finish\";}//color corners\ntempMoves=moves[1].currMoves;for(var _i=0;_i<tempMoves.length;_i++){Node(tempMoves[_i][0],tempMoves[_i][1]).className=\"node-visited\";}//set About color\ndocument.getElementById(\"step1\").style.background=\"rgba(255, 0, 43, 0.3)\";//we finished step 0, so currIndex = 2 now\ncurrIndex=2;setCurrIndex(2);}else{helper(moves.slice(currIndex));return;}//show rest of moves\nfunction helper(restMoves){if(restMoves.length<1){document.getElementById(\"step4\").style.background=\"rgba(255, 0, 43, 0)\";document.getElementById(\"end\").style.background=\"rgba(255, 0, 43, 0.3)\";return currIndex;}//set About color for current step\ndocument.getElementById(\"step\".concat(restMoves[0].currStep+1)).style.background=\"rgba(255, 0, 43, 0.3)\";//reset About color from previous step\ndocument.getElementById(\"step\".concat(moves[currIndex-1].currStep+1)).style.background=\"rgba(0, 0, 0, 0)\";//set background opacity of last item to 0 to remove highlighting.\n//update total and waterLevel on screen\ndocument.getElementById(\"Error\").innerHTML=\"Total Water: \".concat(restMoves[0].total,\" \\n Water Level: \").concat(restMoves[0].waterLevel);var move;var prevMove;if(restMoves[0].currStep===1){//highlight lowest border node\nmove=restMoves[0].currMoves[0];Node(move[0],move[1]).className=\"node-start\";}else if(restMoves[0].currStep===2){//add new border node\nmove=restMoves[0].currMoves[0];Node(move[0],move[1]).className=\"node-finish\";}else if(restMoves[0].currStep===3){//remove highlighting of lowest border node from step 1\nprevMove=moves[currIndex-2].currMoves[0];Node(prevMove[0],prevMove[1]).className=\"node-finish\";for(var _i2=0;_i2<restMoves[0].currMoves.length;_i2++){//remove border node\nmove=restMoves[0].currMoves[_i2];Node(move[0],move[1]).className=\"node-visited\";}}//we finished another step so increment currIndex\ncurrIndex+=1;setCurrIndex(currIndex);}}//FIXME doesn't highlight \"end\" step in about","map":{"version":3,"sources":["C:/Users/hp/Desktop/Trapping-Rain-Water-II/my-app/src/stepForward.js"],"names":["initialAlg","Node","row","col","document","getElementById","stepForward","moves","solvable","state","length","temp","grid","setState","setCurrIndex","console","log","innerHTML","currIndex","className","tempMoves","currMoves","i","style","background","helper","slice","restMoves","currStep","total","waterLevel","move","prevMove"],"mappings":"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","sourcesContent":["import initialAlg from \"./algorithms/initialAlg\"\r\n\r\nfunction Node(row, col) {\r\n  return document.getElementById(`node-${row}-${col}`)\r\n} // Gets a node from the screen\r\n\r\n//this function is bound to App\r\n//so that it can call the functions in App\r\n\r\nexport default function stepForward() {\r\n  let moves, solvable\r\n  //check if moves has already been calculated\r\n  if (this.state.moves.length < 1) {\r\n    let temp = initialAlg(this.state.grid)\r\n    this.setState({ moves: temp.moves })\r\n    moves = temp.moves\r\n    solvable = temp.solvable\r\n  } else {\r\n    moves = this.state.moves\r\n    if (this.state.grid.length < 3 || this.state.grid[0] < 3) {\r\n      solvable = false\r\n    } else {\r\n      solvable = true\r\n    }\r\n  }\r\n\r\n  //copy funtions from app so they can be called within helper\r\n  let setCurrIndex = this.setCurrIndex\r\n\r\n  //Check if matrix is too small\r\n  if (!solvable) {\r\n    console.log(\"matrix too small\")\r\n    document.getElementById(\"Error\").innerHTML =\r\n      \"Matrix has no inner tiles. Total Water = 0.\"\r\n    return\r\n  }\r\n\r\n  let currIndex = this.state.currIndex //how far we are along moves\r\n  //   console.log(\"In visualizeInitialAlg\", currIndex)\r\n\r\n  //reset className of <div id=\"end\"><div> if it's still highlighted fromprevious run\r\n  document.getElementById(\"end\").className = \"\"\r\n\r\n  if (currIndex < 1) {\r\n    //make initial border\r\n    let tempMoves = moves[0].currMoves\r\n    for (let i = 0; i < tempMoves.length; i++) {\r\n      Node(tempMoves[i][0], tempMoves[i][1]).className = \"node-finish\"\r\n    }\r\n    //color corners\r\n    tempMoves = moves[1].currMoves\r\n    for (let i = 0; i < tempMoves.length; i++) {\r\n      Node(tempMoves[i][0], tempMoves[i][1]).className = \"node-visited\"\r\n    }\r\n\r\n    //set About color\r\n    document.getElementById(\"step1\").style.background = \"rgba(255, 0, 43, 0.3)\"\r\n\r\n    //we finished step 0, so currIndex = 2 now\r\n    currIndex = 2\r\n    setCurrIndex(2)\r\n  } else {\r\n    helper(moves.slice(currIndex))\r\n    return\r\n  }\r\n\r\n  //show rest of moves\r\n  function helper(restMoves) {\r\n    if (restMoves.length < 1) {\r\n      document.getElementById(\"step4\").style.background = \"rgba(255, 0, 43, 0)\"\r\n      document.getElementById(\"end\").style.background = \"rgba(255, 0, 43, 0.3)\"\r\n      return currIndex\r\n    }\r\n\r\n    //set About color for current step\r\n    document.getElementById(\r\n      `step${restMoves[0].currStep + 1}`\r\n    ).style.background = \"rgba(255, 0, 43, 0.3)\"\r\n    //reset About color from previous step\r\n    document.getElementById(\r\n      `step${moves[currIndex - 1].currStep + 1}`\r\n    ).style.background = \"rgba(0, 0, 0, 0)\" //set background opacity of last item to 0 to remove highlighting.\r\n\r\n    //update total and waterLevel on screen\r\n    document.getElementById(\r\n      \"Error\"\r\n    ).innerHTML = `Total Water: ${restMoves[0].total} \\n Water Level: ${restMoves[0].waterLevel}`\r\n\r\n    let move\r\n    let prevMove\r\n    if (restMoves[0].currStep === 1) {\r\n      //highlight lowest border node\r\n      move = restMoves[0].currMoves[0]\r\n      Node(move[0], move[1]).className = \"node-start\"\r\n    } else if (restMoves[0].currStep === 2) {\r\n      //add new border node\r\n      move = restMoves[0].currMoves[0]\r\n      Node(move[0], move[1]).className = \"node-finish\"\r\n    } else if (restMoves[0].currStep === 3) {\r\n      //remove highlighting of lowest border node from step 1\r\n      prevMove = moves[currIndex - 2].currMoves[0]\r\n      Node(prevMove[0], prevMove[1]).className = \"node-finish\"\r\n\r\n      for (let i = 0; i < restMoves[0].currMoves.length; i++) {\r\n        //remove border node\r\n        move = restMoves[0].currMoves[i]\r\n        Node(move[0], move[1]).className = \"node-visited\"\r\n      }\r\n    }\r\n\r\n    //we finished another step so increment currIndex\r\n    currIndex += 1\r\n    setCurrIndex(currIndex)\r\n  }\r\n}\r\n\r\n//FIXME doesn't highlight \"end\" step in about\r\n"]},"metadata":{},"sourceType":"module"}